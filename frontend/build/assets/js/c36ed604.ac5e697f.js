"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_book=globalThis.webpackChunkphysical_ai_humanoid_robotics_book||[]).push([[20],{1056(e,n,s){s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>o,toc:()=>c});var i=s(4848),r=s(8453);const t={sidebar_position:3,title:"Chapter 3: ROS 2 Architecture and Core Concepts"},l="Chapter 3: ROS 2 Architecture and Core Concepts",o={id:"part2/chapter3",title:"Chapter 3: ROS 2 Architecture and Core Concepts",description:"Learning Objectives",source:"@site/docs/part2/chapter3.md",sourceDirName:"part2",slug:"/part2/chapter3",permalink:"/Physical-AI-Humanoid-Robotics/docs/part2/chapter3",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/part2/chapter3.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,title:"Chapter 3: ROS 2 Architecture and Core Concepts"},sidebar:"tutorialSidebar",previous:{title:"Chapter 2: The Humanoid Robotics Landscape",permalink:"/Physical-AI-Humanoid-Robotics/docs/part1/chapter2"},next:{title:"Chapter 4: Building ROS 2 Packages with Python",permalink:"/Physical-AI-Humanoid-Robotics/docs/part2/chapter4"}},a={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Introduction to ROS 2 Architecture",id:"introduction-to-ros-2-architecture",level:2},{value:"Core Components of ROS 2",id:"core-components-of-ros-2",level:2},{value:"Nodes",id:"nodes",level:3},{value:"Topics and Publishers/Subscribers",id:"topics-and-publisherssubscribers",level:3},{value:"Services",id:"services",level:3},{value:"Actions",id:"actions",level:3},{value:"Understanding the ROS 2 Ecosystem",id:"understanding-the-ros-2-ecosystem",level:2},{value:"DDS Implementation",id:"dds-implementation",level:3},{value:"Tools and Utilities",id:"tools-and-utilities",level:3},{value:"Package Management",id:"package-management",level:3},{value:"Communication Patterns in Depth",id:"communication-patterns-in-depth",level:2},{value:"Quality of Service (QoS) Settings",id:"quality-of-service-qos-settings",level:3},{value:"Parameters",id:"parameters",level:3},{value:"Practical Implementation: Building a Simple ROS 2 System",id:"practical-implementation-building-a-simple-ros-2-system",level:2},{value:"Integration with Physical AI Systems",id:"integration-with-physical-ai-systems",level:2},{value:"Knowledge Check",id:"knowledge-check",level:2},{value:"Summary",id:"summary",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"chapter-3-ros-2-architecture-and-core-concepts",children:"Chapter 3: ROS 2 Architecture and Core Concepts"}),"\n",(0,i.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Understand the fundamental architecture of ROS 2"}),"\n",(0,i.jsx)(n.li,{children:"Identify and explain the core communication patterns: nodes, topics, services, and actions"}),"\n",(0,i.jsx)(n.li,{children:"Explore the ROS 2 ecosystem and its components"}),"\n",(0,i.jsx)(n.li,{children:"Implement basic ROS 2 communication patterns"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"introduction-to-ros-2-architecture",children:"Introduction to ROS 2 Architecture"}),"\n",(0,i.jsx)(n.p,{children:"Robot Operating System 2 (ROS 2) represents a significant evolution from its predecessor, designed specifically to address the challenges of modern robotics applications. Unlike ROS 1, which was built on a peer-to-peer network model, ROS 2 is built on DDS (Data Distribution Service), providing enhanced reliability, real-time capabilities, and support for distributed systems."}),"\n",(0,i.jsx)(n.p,{children:"ROS 2's architecture is designed with the following principles:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Distributed"}),": Components can run on different machines"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Decentralized"}),": No single point of failure"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Real-time capable"}),": Support for time-critical applications"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Multi-language support"}),": Python, C++, and other languages"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Security"}),": Built-in security features for safe deployment"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"core-components-of-ros-2",children:"Core Components of ROS 2"}),"\n",(0,i.jsx)(n.h3,{id:"nodes",children:"Nodes"}),"\n",(0,i.jsx)(n.p,{children:"Nodes are the fundamental execution units in ROS 2. Each node represents a single process that performs specific computational tasks."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Key characteristics of nodes:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Encapsulate specific functionality"}),"\n",(0,i.jsx)(n.li,{children:"Communicate with other nodes through messages"}),"\n",(0,i.jsx)(n.li,{children:"Can be written in different programming languages"}),"\n",(0,i.jsx)(n.li,{children:"Managed by the ROS 2 runtime system"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Creating a basic ROS 2 node in Python:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\n\nclass MinimalNode(Node):\n    def __init__(self):\n        super().__init__('minimal_node')\n        self.get_logger().info('Hello from minimal node!')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = MinimalNode()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,i.jsx)(n.h3,{id:"topics-and-publisherssubscribers",children:"Topics and Publishers/Subscribers"}),"\n",(0,i.jsx)(n.p,{children:"Topics enable asynchronous communication between nodes using a publish/subscribe pattern."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Key concepts:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Publisher"}),": Sends messages to a topic"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Subscriber"}),": Receives messages from a topic"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Message"}),": Data structure exchanged between nodes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Topic"}),": Named channel for message exchange"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example of publisher/subscriber pattern:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# Publisher example\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass MinimalPublisher(Node):\n    def __init__(self):\n        super().__init__('minimal_publisher')\n        self.publisher = self.create_publisher(String, 'topic', 10)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = f'Hello World: {self.i}'\n        self.publisher.publish(msg)\n        self.get_logger().info(f'Publishing: \"{msg.data}\"')\n        self.i += 1\n"})}),"\n",(0,i.jsx)(n.h3,{id:"services",children:"Services"}),"\n",(0,i.jsx)(n.p,{children:"Services provide synchronous request/response communication between nodes."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Key characteristics:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Request/response pattern"}),"\n",(0,i.jsx)(n.li,{children:"Synchronous communication"}),"\n",(0,i.jsx)(n.li,{children:"Request and response message types"}),"\n",(0,i.jsx)(n.li,{children:"Service server and client model"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example service implementation:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# Service server\nimport rclpy\nfrom rclpy.node import Node\nfrom example_interfaces.srv import AddTwoInts\n\nclass MinimalService(Node):\n    def __init__(self):\n        super().__init__('minimal_service')\n        self.srv = self.create_service(AddTwoInts, 'add_two_ints', self.add_two_ints_callback)\n\n    def add_two_ints_callback(self, request, response):\n        response.sum = request.a + request.b\n        self.get_logger().info(f'Returning: {request.a} + {request.b} = {response.sum}')\n        return response\n"})}),"\n",(0,i.jsx)(n.h3,{id:"actions",children:"Actions"}),"\n",(0,i.jsx)(n.p,{children:"Actions provide a goal-oriented communication pattern for long-running tasks."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Key components:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Goal"}),": Request to perform a long-running task"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Feedback"}),": Periodic updates during task execution"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Result"}),": Final outcome of the task"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Action implementation:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.action import ActionServer\nfrom rclpy.node import Node\nfrom example_interfaces.action import Fibonacci\n\nclass FibonacciActionServer(Node):\n    def __init__(self):\n        super().__init__('fibonacci_action_server')\n        self._action_server = ActionServer(\n            self,\n            Fibonacci,\n            'fibonacci',\n            self.execute_callback)\n\n    def execute_callback(self, goal_handle):\n        self.get_logger().info('Executing goal...')\n        feedback_msg = Fibonacci.Feedback()\n        feedback_msg.sequence = [0, 1]\n\n        for i in range(1, goal_handle.request.order):\n            if goal_handle.is_cancel_requested:\n                goal_handle.canceled()\n                self.get_logger().info('Goal canceled')\n                return Fibonacci.Result()\n\n            feedback_msg.sequence.append(\n                feedback_msg.sequence[i] + feedback_msg.sequence[i-1])\n            goal_handle.publish_feedback(feedback_msg)\n\n        goal_handle.succeed()\n        result = Fibonacci.Result()\n        result.sequence = feedback_msg.sequence\n        return result\n"})}),"\n",(0,i.jsx)(n.h2,{id:"understanding-the-ros-2-ecosystem",children:"Understanding the ROS 2 Ecosystem"}),"\n",(0,i.jsx)(n.h3,{id:"dds-implementation",children:"DDS Implementation"}),"\n",(0,i.jsx)(n.p,{children:"ROS 2 uses DDS as its underlying communication middleware:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Connext DDS"}),": RTI implementation (commercial)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Fast DDS"}),": eProsima implementation (open source)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Cyclone DDS"}),": Eclipse Foundation implementation (open source)"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"tools-and-utilities",children:"Tools and Utilities"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"ros2 run"}),": Execute nodes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"ros2 topic"}),": Inspect and interact with topics"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"ros2 service"}),": Interact with services"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"ros2 action"}),": Interact with actions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"ros2 param"}),": Manage parameters"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"rqt"}),": GUI tools for visualization"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"package-management",children:"Package Management"}),"\n",(0,i.jsx)(n.p,{children:"ROS 2 uses colcon for building packages:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"colcon build"}),": Build workspace"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"colcon test"}),": Run tests"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"ament_cmake"}),": CMake-based build system"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"ament_python"}),": Python package build system"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"communication-patterns-in-depth",children:"Communication Patterns in Depth"}),"\n",(0,i.jsx)(n.h3,{id:"quality-of-service-qos-settings",children:"Quality of Service (QoS) Settings"}),"\n",(0,i.jsx)(n.p,{children:"QoS policies allow fine-tuning of communication behavior:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from rclpy.qos import QoSProfile, QoSReliabilityPolicy, QoSHistoryPolicy\n\n# Example QoS profile for reliable communication\nqos_profile = QoSProfile(\n    reliability=QoSReliabilityPolicy.RELIABLE,\n    history=QoSHistoryPolicy.KEEP_LAST,\n    depth=10\n)\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"QoS parameters:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reliability"}),": Best effort vs. reliable delivery"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Durability"}),": Volatile vs. transient local"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"History"}),": Keep all vs. keep last N messages"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Deadline"}),": Maximum time between consecutive messages"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Liveliness"}),": How to determine if a publisher is alive"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n",(0,i.jsx)(n.p,{children:"Parameters provide a way to configure nodes at runtime:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"class ParameterNode(Node):\n    def __init__(self):\n        super().__init__('parameter_node')\n        self.declare_parameter('my_parameter', 'default_value')\n\n    def get_parameter_value(self):\n        param = self.get_parameter('my_parameter')\n        return param.value\n"})}),"\n",(0,i.jsx)(n.h2,{id:"practical-implementation-building-a-simple-ros-2-system",children:"Practical Implementation: Building a Simple ROS 2 System"}),"\n",(0,i.jsx)(n.p,{children:"Let's create a complete example that demonstrates the core concepts:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Publisher Node (sensor_publisher.py):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import Float32\nimport random\n\nclass SensorPublisher(Node):\n    def __init__(self):\n        super().__init__('sensor_publisher')\n        self.publisher = self.create_publisher(Float32, 'sensor_data', 10)\n        self.timer = self.create_timer(1.0, self.publish_sensor_data)\n\n    def publish_sensor_data(self):\n        msg = Float32()\n        msg.data = random.uniform(0.0, 100.0)  # Simulated sensor reading\n        self.publisher.publish(msg)\n        self.get_logger().info(f'Published sensor data: {msg.data}')\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Subscriber Node (data_processor.py):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import Float32\n\nclass DataProcessor(Node):\n    def __init__(self):\n        super().__init__('data_processor')\n        self.subscription = self.create_subscription(\n            Float32,\n            'sensor_data',\n            self.listener_callback,\n            10)\n        self.subscription  # prevent unused variable warning\n\n    def listener_callback(self, msg):\n        processed_value = msg.data * 2.0  # Simple processing\n        self.get_logger().info(f'Processed data: {processed_value}')\n"})}),"\n",(0,i.jsx)(n.h2,{id:"integration-with-physical-ai-systems",children:"Integration with Physical AI Systems"}),"\n",(0,i.jsx)(n.p,{children:"ROS 2 serves as the nervous system for Physical AI systems by:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Enabling distributed processing"}),": Different AI modules can run as separate nodes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Providing real-time communication"}),": Critical for responsive physical systems"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Supporting sensor integration"}),": Multiple sensor streams can be processed concurrently"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Facilitating hardware abstraction"}),": Same algorithms work across different robot platforms"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"knowledge-check",children:"Knowledge Check"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"What are the four core communication patterns in ROS 2 and their use cases?"}),"\n",(0,i.jsx)(n.li,{children:"How does the publish/subscribe pattern differ from the service pattern?"}),"\n",(0,i.jsx)(n.li,{children:"What is the role of Quality of Service (QoS) settings in ROS 2?"}),"\n",(0,i.jsx)(n.li,{children:"Why is DDS important as the underlying communication middleware?"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsx)(n.p,{children:"This chapter introduced the fundamental architecture of ROS 2, covering its core components: nodes, topics, services, and actions. We explored the ROS 2 ecosystem, including DDS implementations, tools, and package management. The chapter also demonstrated practical implementation of these concepts and explained how ROS 2 serves as the nervous system for Physical AI systems."}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsx)(n.p,{children:"In the next chapter, we'll dive into building ROS 2 packages with Python, exploring the complete development workflow from package creation to deployment."})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453(e,n,s){s.d(n,{R:()=>l,x:()=>o});var i=s(6540);const r={},t=i.createContext(r);function l(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);