"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_book=globalThis.webpackChunkphysical_ai_humanoid_robotics_book||[]).push([[921],{6297(e,n,a){a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var t=a(4848),i=a(8453);const o={sidebar_position:4,title:"Chapter 4: Building ROS 2 Packages with Python"},r="Chapter 4: Building ROS 2 Packages with Python",s={id:"part2/chapter4",title:"Chapter 4: Building ROS 2 Packages with Python",description:"Learning Objectives",source:"@site/docs/part2/chapter4.md",sourceDirName:"part2",slug:"/part2/chapter4",permalink:"/Physical-AI-Humanoid-Robotics/docs/part2/chapter4",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/part2/chapter4.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4,title:"Chapter 4: Building ROS 2 Packages with Python"},sidebar:"tutorialSidebar",previous:{title:"Chapter 3: ROS 2 Architecture and Core Concepts",permalink:"/Physical-AI-Humanoid-Robotics/docs/part2/chapter3"},next:{title:"Chapter 5: ROS 2 Nodes, Topics, and Services",permalink:"/Physical-AI-Humanoid-Robotics/docs/part2/chapter5"}},l={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Creating ROS 2 Packages",id:"creating-ros-2-packages",level:2},{value:"Package Structure",id:"package-structure",level:3},{value:"Creating a Package with Colcon",id:"creating-a-package-with-colcon",level:3},{value:"Package.xml Configuration",id:"packagexml-configuration",level:3},{value:"Setup.py Configuration",id:"setuppy-configuration",level:3},{value:"Building Nodes with Python",id:"building-nodes-with-python",level:2},{value:"Basic Node Structure",id:"basic-node-structure",level:3},{value:"Publisher Node Example",id:"publisher-node-example",level:3},{value:"Subscriber Node Example",id:"subscriber-node-example",level:3},{value:"Launch Files",id:"launch-files",level:2},{value:"Python Launch Files",id:"python-launch-files",level:3},{value:"Launch File Parameters",id:"launch-file-parameters",level:3},{value:"Parameter Management",id:"parameter-management",level:2},{value:"Node Parameters",id:"node-parameters",level:3},{value:"YAML Parameter Files",id:"yaml-parameter-files",level:3},{value:"Practical Example: Complete Humanoid Robot Package",id:"practical-example-complete-humanoid-robot-package",level:2},{value:"Building and Running the Package",id:"building-and-running-the-package",level:2},{value:"Building the Package",id:"building-the-package",level:3},{value:"Running Nodes",id:"running-nodes",level:3},{value:"Best Practices for Python Package Development",id:"best-practices-for-python-package-development",level:2},{value:"Code Organization",id:"code-organization",level:3},{value:"Error Handling",id:"error-handling",level:3},{value:"Performance Considerations",id:"performance-considerations",level:3},{value:"Knowledge Check",id:"knowledge-check",level:2},{value:"Summary",id:"summary",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"chapter-4-building-ros-2-packages-with-python",children:"Chapter 4: Building ROS 2 Packages with Python"}),"\n",(0,t.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Create ROS 2 packages using Python"}),"\n",(0,t.jsx)(n.li,{children:"Build nodes with Python using rclpy"}),"\n",(0,t.jsx)(n.li,{children:"Implement launch files and parameter management"}),"\n",(0,t.jsx)(n.li,{children:"Understand the complete ROS 2 development workflow"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"creating-ros-2-packages",children:"Creating ROS 2 Packages"}),"\n",(0,t.jsx)(n.p,{children:"ROS 2 packages are the fundamental building blocks of ROS 2 applications. Each package contains source code, dependencies, and configuration files that define specific functionality."}),"\n",(0,t.jsx)(n.h3,{id:"package-structure",children:"Package Structure"}),"\n",(0,t.jsx)(n.p,{children:"A typical ROS 2 Python package follows this structure:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"my_robot_package/\n\u251c\u2500\u2500 CMakeLists.txt          # Build configuration (for mixed packages)\n\u251c\u2500\u2500 package.xml             # Package metadata\n\u251c\u2500\u2500 setup.py                # Python package configuration\n\u251c\u2500\u2500 setup.cfg               # Installation configuration\n\u251c\u2500\u2500 resource/               # Resource files\n\u251c\u2500\u2500 test/                   # Test files\n\u2514\u2500\u2500 my_robot_package/       # Python module\n    \u251c\u2500\u2500 __init__.py\n    \u251c\u2500\u2500 main.py\n    \u2514\u2500\u2500 nodes/\n        \u251c\u2500\u2500 __init__.py\n        \u251c\u2500\u2500 sensor_node.py\n        \u2514\u2500\u2500 controller_node.py\n"})}),"\n",(0,t.jsx)(n.h3,{id:"creating-a-package-with-colcon",children:"Creating a Package with Colcon"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"ros2 pkg create"})," command creates a new package with the proper structure:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ros2 pkg create --build-type ament_python my_robot_package\n"})}),"\n",(0,t.jsx)(n.p,{children:"This command generates the basic package structure with necessary files and directories."}),"\n",(0,t.jsx)(n.h3,{id:"packagexml-configuration",children:"Package.xml Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"package.xml"})," file contains metadata about the package:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>\n<package format="3">\n  <name>my_robot_package</name>\n  <version>0.0.0</version>\n  <description>Example ROS 2 package for humanoid robotics</description>\n  <maintainer email="user@example.com">Your Name</maintainer>\n  <license>Apache License 2.0</license>\n\n  <depend>rclpy</depend>\n  <depend>std_msgs</depend>\n  <depend>sensor_msgs</depend>\n\n  <test_depend>ament_copyright</test_depend>\n  <test_depend>ament_flake8</test_depend>\n  <test_depend>ament_pep257</test_depend>\n  <test_depend>python3-pytest</test_depend>\n\n  <export>\n    <build_type>ament_python</build_type>\n  </export>\n</package>\n'})}),"\n",(0,t.jsx)(n.h3,{id:"setuppy-configuration",children:"Setup.py Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"setup.py"})," file defines the Python package configuration:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from setuptools import setup\nfrom glob import glob\nimport os\n\npackage_name = 'my_robot_package'\n\nsetup(\n    name=package_name,\n    version='0.0.0',\n    packages=[package_name],\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n        (os.path.join('share', package_name, 'launch'), glob('launch/*.py')),\n    ],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    maintainer='Your Name',\n    maintainer_email='user@example.com',\n    description='Example ROS 2 package for humanoid robotics',\n    license='Apache License 2.0',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            'sensor_node = my_robot_package.nodes.sensor_node:main',\n            'controller_node = my_robot_package.nodes.controller_node:main',\n        ],\n    },\n)\n"})}),"\n",(0,t.jsx)(n.h2,{id:"building-nodes-with-python",children:"Building Nodes with Python"}),"\n",(0,t.jsx)(n.h3,{id:"basic-node-structure",children:"Basic Node Structure"}),"\n",(0,t.jsx)(n.p,{children:"Every ROS 2 Python node follows a standard structure:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\n\nclass MyRobotNode(Node):\n    def __init__(self):\n        super().__init__('my_robot_node')\n        self.get_logger().info('My Robot Node initialized')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = MyRobotNode()\n    try:\n        rclpy.spin(node)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        node.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h3,{id:"publisher-node-example",children:"Publisher Node Example"}),"\n",(0,t.jsx)(n.p,{children:"Here's a complete example of a sensor publisher node:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom sensor_msgs.msg import JointState\nfrom builtin_interfaces.msg import Time\nimport random\n\nclass JointStatePublisher(Node):\n    def __init__(self):\n        super().__init__('joint_state_publisher')\n\n        # Create publisher\n        self.publisher = self.create_publisher(JointState, 'joint_states', 10)\n\n        # Timer for periodic publishing\n        self.timer = self.create_timer(0.1, self.publish_joint_states)\n\n        # Joint names for a humanoid robot\n        self.joint_names = [\n            'left_hip', 'left_knee', 'left_ankle',\n            'right_hip', 'right_knee', 'right_ankle',\n            'left_shoulder', 'left_elbow', 'left_wrist',\n            'right_shoulder', 'right_elbow', 'right_wrist'\n        ]\n\n        self.get_logger().info('Joint State Publisher initialized')\n\n    def publish_joint_states(self):\n        msg = JointState()\n        msg.header.stamp = self.get_clock().now().to_msg()\n        msg.name = self.joint_names\n\n        # Simulate joint positions (in radians)\n        msg.position = [random.uniform(-1.5, 1.5) for _ in self.joint_names]\n        # Simulate joint velocities\n        msg.velocity = [random.uniform(-0.5, 0.5) for _ in self.joint_names]\n        # Simulate joint efforts\n        msg.effort = [random.uniform(-10.0, 10.0) for _ in self.joint_names]\n\n        self.publisher.publish(msg)\n        self.get_logger().info(f'Published joint states for {len(msg.name)} joints')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = JointStatePublisher()\n    try:\n        rclpy.spin(node)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        node.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h3,{id:"subscriber-node-example",children:"Subscriber Node Example"}),"\n",(0,t.jsx)(n.p,{children:"Here's an example of a subscriber node that processes sensor data:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom sensor_msgs.msg import LaserScan\nfrom geometry_msgs.msg import Twist\nimport math\n\nclass ObstacleAvoidanceNode(Node):\n    def __init__(self):\n        super().__init__('obstacle_avoidance_node')\n\n        # Create subscriber for laser scan data\n        self.subscription = self.create_subscription(\n            LaserScan,\n            'scan',\n            self.laser_callback,\n            10\n        )\n\n        # Create publisher for velocity commands\n        self.velocity_publisher = self.create_publisher(Twist, 'cmd_vel', 10)\n\n        self.get_logger().info('Obstacle Avoidance Node initialized')\n\n    def laser_callback(self, msg):\n        # Process laser scan to detect obstacles\n        min_distance = min(msg.ranges)\n\n        # Create velocity command\n        cmd_vel = Twist()\n\n        if min_distance < 1.0:  # Obstacle too close\n            cmd_vel.linear.x = 0.0\n            cmd_vel.angular.z = 0.5  # Turn to avoid\n        else:\n            cmd_vel.linear.x = 0.5  # Move forward\n            cmd_vel.angular.z = 0.0\n\n        self.velocity_publisher.publish(cmd_vel)\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = ObstacleAvoidanceNode()\n    try:\n        rclpy.spin(node)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        node.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h2,{id:"launch-files",children:"Launch Files"}),"\n",(0,t.jsx)(n.p,{children:"Launch files allow you to start multiple nodes with a single command, making system deployment more manageable."}),"\n",(0,t.jsx)(n.h3,{id:"python-launch-files",children:"Python Launch Files"}),"\n",(0,t.jsx)(n.p,{children:"ROS 2 uses Python for launch file creation:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch_ros.actions import Node\nfrom ament_index_python.packages import get_package_share_directory\n\ndef generate_launch_description():\n    return LaunchDescription([\n        Node(\n            package='my_robot_package',\n            executable='joint_state_publisher',\n            name='joint_state_publisher',\n            parameters=[\n                {'use_sim_time': True},\n                {'publish_frequency': 50.0}\n            ],\n            output='screen'\n        ),\n        Node(\n            package='my_robot_package',\n            executable='obstacle_avoidance_node',\n            name='obstacle_avoidance_node',\n            parameters=[\n                {'safety_distance': 1.0},\n                {'max_linear_speed': 0.5}\n            ],\n            output='screen'\n        ),\n        Node(\n            package='rviz2',\n            executable='rviz2',\n            name='rviz2',\n            arguments=['-d', [os.path.join(get_package_share_directory('my_robot_package'), 'config', 'robot.rviz')]]\n        )\n    ])\n"})}),"\n",(0,t.jsx)(n.h3,{id:"launch-file-parameters",children:"Launch File Parameters"}),"\n",(0,t.jsx)(n.p,{children:"Launch files can accept command-line arguments:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch.actions import DeclareLaunchArgument\nfrom launch.substitutions import LaunchConfiguration\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    # Declare launch arguments\n    use_sim_time = LaunchConfiguration('use_sim_time')\n    robot_name = LaunchConfiguration('robot_name')\n\n    # Declare the arguments\n    use_sim_time_arg = DeclareLaunchArgument(\n        'use_sim_time',\n        default_value='false',\n        description='Use simulation time'\n    )\n\n    robot_name_arg = DeclareLaunchArgument(\n        'robot_name',\n        default_value='my_robot',\n        description='Name of the robot'\n    )\n\n    return LaunchDescription([\n        use_sim_time_arg,\n        robot_name_arg,\n        Node(\n            package='my_robot_package',\n            executable='robot_controller',\n            name=[robot_name, '_controller'],\n            parameters=[{'use_sim_time': use_sim_time}],\n            output='screen'\n        )\n    ])\n"})}),"\n",(0,t.jsx)(n.h2,{id:"parameter-management",children:"Parameter Management"}),"\n",(0,t.jsx)(n.h3,{id:"node-parameters",children:"Node Parameters"}),"\n",(0,t.jsx)(n.p,{children:"Parameters allow runtime configuration of nodes:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\n\nclass ParameterizedNode(Node):\n    def __init__(self):\n        super().__init__('parameterized_node')\n\n        # Declare parameters with default values\n        self.declare_parameter('max_speed', 1.0)\n        self.declare_parameter('safety_distance', 0.5)\n        self.declare_parameter('control_frequency', 50.0)\n\n        # Get parameter values\n        self.max_speed = self.get_parameter('max_speed').value\n        self.safety_distance = self.get_parameter('safety_distance').value\n        self.control_frequency = self.get_parameter('control_frequency').value\n\n        # Callback for parameter changes\n        self.add_on_set_parameters_callback(self.parameters_callback)\n\n        self.get_logger().info(\n            f'Node initialized with max_speed: {self.max_speed}, '\n            f'safety_distance: {self.safety_distance}'\n        )\n\n    def parameters_callback(self, params):\n        for param in params:\n            if param.name == 'max_speed' and param.type_ == param.Type.DOUBLE:\n                self.max_speed = param.value\n                self.get_logger().info(f'Max speed updated to: {self.max_speed}')\n            elif param.name == 'safety_distance' and param.type_ == param.Type.DOUBLE:\n                self.safety_distance = param.value\n                self.get_logger().info(f'Safety distance updated to: {self.safety_distance}')\n        return SetParametersResult(successful=True)\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = ParameterizedNode()\n    try:\n        rclpy.spin(node)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        node.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h3,{id:"yaml-parameter-files",children:"YAML Parameter Files"}),"\n",(0,t.jsx)(n.p,{children:"Parameters can also be defined in YAML files:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"# config/robot_params.yaml\nmy_robot_package:\n  ros__parameters:\n    max_speed: 1.5\n    safety_distance: 0.8\n    control_frequency: 100.0\n    joint_limits:\n      min_position: -2.0\n      max_position: 2.0\n      max_velocity: 5.0\n    pid_gains:\n      kp: 1.0\n      ki: 0.1\n      kd: 0.05\n"})}),"\n",(0,t.jsx)(n.p,{children:"Loading parameters in launch files:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch_ros.actions import Node\nfrom ament_index_python.packages import get_package_share_directory\nimport os\n\ndef generate_launch_description():\n    config = os.path.join(\n        get_package_share_directory('my_robot_package'),\n        'config',\n        'robot_params.yaml'\n    )\n\n    return LaunchDescription([\n        Node(\n            package='my_robot_package',\n            executable='robot_controller',\n            name='robot_controller',\n            parameters=[config],\n            output='screen'\n        )\n    ])\n"})}),"\n",(0,t.jsx)(n.h2,{id:"practical-example-complete-humanoid-robot-package",children:"Practical Example: Complete Humanoid Robot Package"}),"\n",(0,t.jsx)(n.p,{children:"Let's create a complete example that demonstrates the integration of all concepts:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["Main package file (my_robot_package/",(0,t.jsx)(n.strong,{children:"init"}),".py):"]})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from .robot_controller import RobotController\nfrom .sensor_processor import SensorProcessor\nfrom .motion_planner import MotionPlanner\n\n__all__ = ['RobotController', 'SensorProcessor', 'MotionPlanner']\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Robot Controller Node (my_robot_package/robot_controller.py):"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom sensor_msgs.msg import JointState\nfrom geometry_msgs.msg import Twist\nfrom builtin_interfaces.msg import Time\nimport time\n\nclass RobotController(Node):\n    def __init__(self):\n        super().__init__('robot_controller')\n\n        # Publishers\n        self.joint_pub = self.create_publisher(JointState, 'joint_states', 10)\n        self.cmd_vel_pub = self.create_publisher(Twist, 'cmd_vel', 10)\n\n        # Subscribers\n        self.joint_sub = self.create_subscription(\n            JointState, 'desired_joint_states', self.joint_command_callback, 10)\n\n        # Timers\n        self.control_timer = self.create_timer(0.02, self.control_loop)  # 50 Hz\n\n        # Robot state\n        self.current_joint_positions = {}\n        self.desired_joint_positions = {}\n\n        # Declare parameters\n        self.declare_parameter('control_frequency', 50.0)\n        self.declare_parameter('max_joint_velocity', 1.0)\n\n        self.get_logger().info('Robot Controller initialized')\n\n    def joint_command_callback(self, msg):\n        \"\"\"Handle joint position commands\"\"\"\n        for i, name in enumerate(msg.name):\n            if i < len(msg.position):\n                self.desired_joint_positions[name] = msg.position[i]\n\n    def control_loop(self):\n        \"\"\"Main control loop\"\"\"\n        # Update joint states\n        joint_msg = JointState()\n        joint_msg.header.stamp = self.get_clock().now().to_msg()\n        joint_msg.header.frame_id = 'base_link'\n\n        # Simulate joint position updates\n        for joint_name in self.desired_joint_positions:\n            if joint_name not in self.current_joint_positions:\n                self.current_joint_positions[joint_name] = 0.0\n\n            # Simple proportional control\n            error = self.desired_joint_positions[joint_name] - self.current_joint_positions[joint_name]\n            velocity = min(abs(error), self.get_parameter('max_joint_velocity').value)\n\n            if error > 0:\n                self.current_joint_positions[joint_name] += velocity * 0.02\n            else:\n                self.current_joint_positions[joint_name] -= velocity * 0.02\n\n            # Update message\n            joint_msg.name.append(joint_name)\n            joint_msg.position.append(self.current_joint_positions[joint_name])\n\n        self.joint_pub.publish(joint_msg)\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = RobotController()\n    try:\n        rclpy.spin(node)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        node.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h2,{id:"building-and-running-the-package",children:"Building and Running the Package"}),"\n",(0,t.jsx)(n.h3,{id:"building-the-package",children:"Building the Package"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Navigate to workspace\ncd ~/ros2_ws\n\n# Build the package\ncolcon build --packages-select my_robot_package\n\n# Source the workspace\nsource install/setup.bash\n"})}),"\n",(0,t.jsx)(n.h3,{id:"running-nodes",children:"Running Nodes"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Run a single node\nros2 run my_robot_package joint_state_publisher\n\n# Run with launch file\nros2 launch my_robot_package robot.launch.py\n\n# Run with parameters\nros2 launch my_robot_package robot.launch.py use_sim_time:=true robot_name:=humanoid_robot\n"})}),"\n",(0,t.jsx)(n.h2,{id:"best-practices-for-python-package-development",children:"Best Practices for Python Package Development"}),"\n",(0,t.jsx)(n.h3,{id:"code-organization",children:"Code Organization"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Use meaningful package and node names"}),"\n",(0,t.jsx)(n.li,{children:"Organize nodes in subdirectories"}),"\n",(0,t.jsx)(n.li,{children:"Separate concerns with different modules"}),"\n",(0,t.jsx)(n.li,{children:"Use proper Python packaging conventions"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Implement proper exception handling"}),"\n",(0,t.jsx)(n.li,{children:"Use logging for debugging"}),"\n",(0,t.jsx)(n.li,{children:"Handle ROS communication failures gracefully"}),"\n",(0,t.jsx)(n.li,{children:"Implement node cleanup procedures"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Minimize message publishing frequency"}),"\n",(0,t.jsx)(n.li,{children:"Use appropriate QoS settings"}),"\n",(0,t.jsx)(n.li,{children:"Optimize computational loops"}),"\n",(0,t.jsx)(n.li,{children:"Consider real-time requirements"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"knowledge-check",children:"Knowledge Check"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"What is the standard structure of a ROS 2 Python package?"}),"\n",(0,t.jsx)(n.li,{children:"How do you declare and use parameters in a ROS 2 node?"}),"\n",(0,t.jsx)(n.li,{children:"What is the purpose of launch files and how do they improve system management?"}),"\n",(0,t.jsx)(n.li,{children:"How do you handle parameter changes at runtime?"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsx)(n.p,{children:"This chapter covered the complete process of building ROS 2 packages with Python, from package creation to deployment. We explored the standard package structure, node development patterns, launch file creation, and parameter management. The chapter also provided practical examples demonstrating the integration of these concepts in a humanoid robot application."}),"\n",(0,t.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,t.jsx)(n.p,{children:"In the next chapter, we'll dive deeper into ROS 2 communication patterns, exploring nodes, topics, and services in more detail, and learn how to bridge Python agents to ROS controllers using rclpy."})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453(e,n,a){a.d(n,{R:()=>r,x:()=>s});var t=a(6540);const i={},o=t.createContext(i);function r(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);